# Feature Specification: Agentic CAD Dashboard

**Feature**: 007-agentic-cad-dashboard
**Status**: Draft
**Mission**: frontend-dev

## 1. Overview

The **Agentic CAD Dashboard** is a modern React/Vite web application that serves as the human interface for the Problemologist system. It enables "Human-in-the-Loop" interaction, real-time debugging of long-running agents, and visual inspection of 3D CAD assets.

It interacts with the **Controller** via a strict OpenAPI-typed backend.

## 2. Goals & Success Criteria

### 2.1. Primary Goals

1. **Strict API Integration**: Frontend types are autogenerated from the Backend OpenAPI schema to prevent contract drift.
2. **Visual Debugging**: View Agent "Thoughts", "Tools", and "Logs" in structured, real-time feeds.
3. **Benchmark Co-Creation**: An interactive Wizard interface for the Benchmark Generator (Spec 005) - Plan -> Review -> Approve.
4. **Control**: Ability to **Interrupt** and **Retry** running agents.

### 2.2. Success Criteria

- **Type Safety**: 100% of API calls use generated TypeScript clients.
- **Rendering**: 3D Stl Viewer loads assets < 1s.
- **Live Updates**: Uses polling/WebSockets to show agent progress without reload.

## 3. User Stories

- **As a User**, I want to see *why* the agent is stuck (Reasoning trace).
- **As a User**, I want to click "Stop" if I see the agent going down a rabbit hole.
- **As a User**, I want to rotate the 3D model of the "Failed" benchmark in the browser.

## 4. Functional Requirements

### 4.1. Dashboard Views

- **Home**: List of active/past Runs.
- **Run Detail**:
  - **Chat/Log**: Stream of thoughts and tool calls.
  - **3D Viewer**: Canvas for `renders/` artifacts.
  - **Code Editor**: Read-only view of `script.py`.
- **Benchmark Wizard**: Step-by-step UI for Spec 005 (Prompt -> Plan -> Review -> Assets).

### 4.2. Control

- **Submit Task**: Form to launch a new Engineer Agent run.
- **Interrupt**: Button to kill a running Temporal workflow.

### 4.3. 3D Visualization

- **Library**: `react-three-fiber` / `drei`.
- **Features**: Orbit controls, Wireframe toggle, Auto-rotate.

## 5. Technical Design

### 5.1. Tech Stack

- **Framework**: React 18+, Vite.
- **Language**: TypeScript.
- **Deployment**: Vercel (or Railway Static).
- **API Client**: `openapi-typescript-codegen` (or similar).
- **Styling**: TailwindCSS + Shadcn/UI (Premium aesthetic).

### 5.2. Architecture

- **Backend**: The Controller App (FastAPI) serves the API.
- **Frontend**: SPA that consumes the API.
- **Assets**: Loaded directly from the **routed S3 bucket** (via presigned URLs generated by the Backend).

## 6. Assumptions

- **Code Generation**: The user (me) will use AI tools (Google Stitch / Claude) to generate the UI components based on this spec.
- **Strict Schema**: The backend MUST expose a valid OpenAPI.json.
