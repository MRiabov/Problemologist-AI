{
  "runs": [
    {
      "timestamp": "2026-02-25T17:21:42.177012",
      "status": "passed",
      "total": 5,
      "passed": 5,
      "failed": 0,
      "skipped": 0,
      "errors": 0,
      "duration": 90.38,
      "tests": [
        {
          "name": "test_int_004_episode_artifact_persistence",
          "classname": "tests.integration.architecture_p0.test_missing_p0",
          "time": 0.438,
          "status": "passed",
          "message": null
        },
        {
          "name": "test_int_005_trace_realtime_broadcast",
          "classname": "tests.integration.architecture_p0.test_missing_p0",
          "time": 5.135,
          "status": "passed",
          "message": null
        },
        {
          "name": "test_int_011_planner_target_caps_validation",
          "classname": "tests.integration.architecture_p0.test_missing_p0",
          "time": 0.091,
          "status": "passed",
          "message": null
        },
        {
          "name": "test_int_014_cots_propagation",
          "classname": "tests.integration.architecture_p0.test_missing_p0",
          "time": 5.134,
          "status": "passed",
          "message": null
        },
        {
          "name": "test_int_025_events_collection_e2e",
          "classname": "tests.integration.architecture_p0.test_missing_p0",
          "time": 75.408,
          "status": "passed",
          "message": null
        }
      ]
    },
    {
      "timestamp": "2026-02-25T17:17:26.951106",
      "status": "failed",
      "total": 1,
      "passed": 0,
      "failed": 0,
      "skipped": 0,
      "errors": 1,
      "duration": 43.497,
      "tests": [
        {
          "name": "tests.worker_heavy.test_dfm_material_logic",
          "classname": "",
          "time": 0.0,
          "status": "error",
          "message": "ImportError while importing test module '/home/maksym/Work/proj/Problemologist/Problemologist-AI/tests/worker_heavy/test_dfm_material_logic.py'.\nHint: make sure your test modules/packages have valid Python names.\nTraceback:\n/usr/lib/python3.12/importlib/__init__.py:90: in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/worker_heavy/test_dfm_material_logic.py:5: in <module>\n    from shared.workers.workbench_models import (\nE   ImportError: cannot import name 'MethodConfig' from 'shared.workers.workbench_models' (/home/maksym/Work/proj/Problemologist/Problemologist-AI/shared/workers/workbench_models.py)"
        }
      ]
    },
    {
      "timestamp": "2026-02-25T17:08:19.578507",
      "status": "passed",
      "total": 5,
      "passed": 5,
      "failed": 0,
      "skipped": 0,
      "errors": 0,
      "duration": 90.415,
      "tests": [
        {
          "name": "test_int_004_episode_artifact_persistence",
          "classname": "tests.integration.architecture_p0.test_missing_p0",
          "time": 0.438,
          "status": "passed",
          "message": null
        },
        {
          "name": "test_int_005_trace_realtime_broadcast",
          "classname": "tests.integration.architecture_p0.test_missing_p0",
          "time": 5.154,
          "status": "passed",
          "message": null
        },
        {
          "name": "test_int_011_planner_target_caps_validation",
          "classname": "tests.integration.architecture_p0.test_missing_p0",
          "time": 0.097,
          "status": "passed",
          "message": null
        },
        {
          "name": "test_int_014_cots_propagation",
          "classname": "tests.integration.architecture_p0.test_missing_p0",
          "time": 5.132,
          "status": "passed",
          "message": null
        },
        {
          "name": "test_int_025_events_collection_e2e",
          "classname": "tests.integration.architecture_p0.test_missing_p0",
          "time": 75.43,
          "status": "passed",
          "message": null
        }
      ]
    },
    {
      "timestamp": "2026-02-25T17:03:09.085771",
      "status": "passed",
      "total": 2,
      "passed": 2,
      "failed": 0,
      "skipped": 0,
      "errors": 0,
      "duration": 14.947,
      "tests": [
        {
          "name": "test_int_011_planner_caps_enforcement",
          "classname": "tests.integration.architecture_p0.test_planner_gates",
          "time": 13.617,
          "status": "passed",
          "message": null
        },
        {
          "name": "test_int_010_planner_pricing_script_integration",
          "classname": "tests.integration.architecture_p0.test_planner_gates",
          "time": 1.135,
          "status": "passed",
          "message": null
        }
      ]
    },
    {
      "timestamp": "2026-02-25T17:01:53.329609",
      "status": "failed",
      "total": 2,
      "passed": 0,
      "failed": 2,
      "skipped": 0,
      "errors": 0,
      "duration": 0.833,
      "tests": [
        {
          "name": "test_int_011_planner_caps_enforcement",
          "classname": "tests.integration.architecture_p0.test_planner_gates",
          "time": 0.203,
          "status": "failed",
          "message": "@contextlib.contextmanager\n    def map_httpcore_exceptions() -> typing.Iterator[None]:\n        global HTTPCORE_EXC_MAP\n        if len(HTTPCORE_EXC_MAP) == 0:\n            HTTPCORE_EXC_MAP = _load_httpcore_exceptions()\n        try:\n>           yield\n\n.venv/lib/python3.12/site-packages/httpx/_transports/default.py:101: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n.venv/lib/python3.12/site-packages/httpx/_transports/default.py:394: in handle_async_request\n    resp = await self._pool.handle_async_request(req)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py:256: in handle_async_request\n    raise exc from None\n.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py:236: in handle_async_request\n    response = await connection.handle_async_request(\n.venv/lib/python3.12/site-packages/httpcore/_async/connection.py:101: in handle_async_request\n    raise exc\n.venv/lib/python3.12/site-packages/httpcore/_async/connection.py:78: in handle_async_request\n    stream = await self._connect(request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.12/site-packages/httpcore/_async/connection.py:124: in _connect\n    stream = await self._network_backend.connect_tcp(**kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.12/site-packages/httpcore/_backends/auto.py:31: in connect_tcp\n    return await self._backend.connect_tcp(\n.venv/lib/python3.12/site-packages/httpcore/_backends/anyio.py:113: in connect_tcp\n    with map_exceptions(exc_map):\n/usr/lib/python3.12/contextlib.py:158: in __exit__\n    self.gen.throw(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nmap = {<class 'TimeoutError'>: <class 'httpcore.ConnectTimeout'>, <class 'OSError'>: <class 'httpcore.ConnectError'>, <class 'anyio.BrokenResourceError'>: <class 'httpcore.ConnectError'>}\n\n    @contextlib.contextmanager\n    def map_exceptions(map: ExceptionMapping) -> typing.Iterator[None]:\n        try:\n            yield\n        except Exception as exc:  # noqa: PIE786\n            for from_exc, to_exc in map.items():\n                if isinstance(exc, from_exc):\n>                   raise to_exc(exc) from exc\nE                   httpcore.ConnectError: All connection attempts failed\n\n.venv/lib/python3.12/site-packages/httpcore/_exceptions.py:14: ConnectError\n\nThe above exception was the direct cause of the following exception:\n\nsession_id = 'test-gates-18820231'\nbase_headers = {'X-Session-ID': 'test-gates-18820231'}\nvalid_plan = '## 1. Solution Overview\\nA valid solution overview.\\n\\n## 2. Parts List\\n| Part | Qty |\\n|------|-----|\\n| Box  | 1  ...ategy\\n1. Step one.\\n\\n## 4. Cost & Weight Budget\\n- Cost: $10\\n- Weight: 100g\\n\\n## 5. Risk Assessment\\n- Risk: Low\\n'\nvalid_todo = '- [x] Step 1\\n- [-] Step 2'\nvalid_objectives = ObjectivesYaml(objectives=ObjectivesSection(goal_zone=BoundingBox(min=(10.0, 10.0, 10.0), max=(20.0, 20.0, 20.0)), for...zationMeta(static_variation_id=None, runtime_jitter_enabled=True), electronics_requirements=None, assembly_totals=None)\nminimal_script = '\\nfrom build123d import *\\nfrom shared.models.schemas import PartMetadata\\nfrom shared.workers.workbench_models impor...artMetadata(\\n        manufacturing_method=ManufacturingMethod.CNC, material_id=\"aluminum-6061\"\\n    )\\n    return p\\n'\n\n    @pytest.mark.integration_p0\n    @pytest.mark.asyncio\n    async def test_int_011_planner_caps_enforcement(\n        session_id, base_headers, valid_plan, valid_todo, valid_objectives, minimal_script\n    ):\n        \"\"\"INT-011: Verify handoff blockage when planner caps exceed benchmark limits.\"\"\"\n        async with httpx.AsyncClient(timeout=300.0) as client:\n            # Keep invalid payload as raw data so schema validation happens in the endpoint path.\n            invalid_cost = {\n                \"version\": \"1.0\",\n                \"constraints\": {\n                    \"benchmark_max_unit_cost_usd\": 50.0,\n                    \"benchmark_max_weight_g\": 1000.0,\n                    \"planner_target_max_unit_cost_usd\": 60.0,  # OVER LIMIT\n                    \"planner_target_max_weight_g\": 500.0,\n                },\n                \"totals\": {\n                    \"estimated_unit_cost_usd\": 40.0,\n                    \"estimated_weight_g\": 200.0,\n                    \"estimate_confidence\": \"medium\",\n                },\n            }\n            files = {\n                \"plan.md\": valid_plan,\n                \"todo.md\": valid_todo,\n                \"objectives.yaml\": valid_objectives,\n                \"assembly_definition.yaml\": invalid_cost,\n                \"solution.py\": minimal_script,\n            }\n>           await setup_workspace(client, base_headers, files)\n\ntests/integration/architecture_p0/test_planner_gates.py:447: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ntests/integration/architecture_p0/test_planner_gates.py:141: in setup_workspace\n    resp = await client.post(\n.venv/lib/python3.12/site-packages/httpx/_client.py:1859: in post\n    return await self.request(\n.venv/lib/python3.12/site-packages/httpx/_client.py:1540: in request\n    return await self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.12/site-packages/httpx/_client.py:1629: in send\n    response = await self._send_handling_auth(\n.venv/lib/python3.12/site-packages/httpx/_client.py:1657: in _send_handling_auth\n    response = await self._send_handling_redirects(\n.venv/lib/python3.12/site-packages/httpx/_client.py:1694: in _send_handling_redirects\n    response = await self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.12/site-packages/httpx/_client.py:1730: in _send_single_request\n    response = await transport.handle_async_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.12/site-packages/httpx/_transports/default.py:393: in handle_async_request\n    with map_httpcore_exceptions():\n/usr/lib/python3.12/contextlib.py:158: in __exit__\n    self.gen.throw(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\n    @contextlib.contextmanager\n    def map_httpcore_exceptions() -> typing.Iterator[None]:\n        global HTTPCORE_EXC_MAP\n        if len(HTTPCORE_EXC_MAP) == 0:\n            HTTPCORE_EXC_MAP = _load_httpcore_exceptions()\n        try:\n            yield\n        except Exception as exc:\n            mapped_exc = None\n    \n            for from_exc, to_exc in HTTPCORE_EXC_MAP.items():\n                if not isinstance(exc, from_exc):\n                    continue\n                # We want to map to the most specific exception we can find.\n                # Eg if `exc` is an `httpcore.ReadTimeout`, we want to map to\n                # `httpx.ReadTimeout`, not just `httpx.TimeoutException`.\n                if mapped_exc is None or issubclass(to_exc, mapped_exc):\n                    mapped_exc = to_exc\n    \n            if mapped_exc is None:  # pragma: no cover\n                raise\n    \n            message = str(exc)\n>           raise mapped_exc(message) from exc\nE           httpx.ConnectError: All connection attempts failed\n\n.venv/lib/python3.12/site-packages/httpx/_transports/default.py:118: ConnectError"
        },
        {
          "name": "test_int_010_planner_pricing_script_integration",
          "classname": "tests.integration.architecture_p0.test_planner_gates",
          "time": 0.082,
          "status": "failed",
          "message": "@contextlib.contextmanager\n    def map_httpcore_exceptions() -> typing.Iterator[None]:\n        global HTTPCORE_EXC_MAP\n        if len(HTTPCORE_EXC_MAP) == 0:\n            HTTPCORE_EXC_MAP = _load_httpcore_exceptions()\n        try:\n>           yield\n\n.venv/lib/python3.12/site-packages/httpx/_transports/default.py:101: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n.venv/lib/python3.12/site-packages/httpx/_transports/default.py:394: in handle_async_request\n    resp = await self._pool.handle_async_request(req)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py:256: in handle_async_request\n    raise exc from None\n.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py:236: in handle_async_request\n    response = await connection.handle_async_request(\n.venv/lib/python3.12/site-packages/httpcore/_async/connection.py:101: in handle_async_request\n    raise exc\n.venv/lib/python3.12/site-packages/httpcore/_async/connection.py:78: in handle_async_request\n    stream = await self._connect(request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.12/site-packages/httpcore/_async/connection.py:124: in _connect\n    stream = await self._network_backend.connect_tcp(**kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.12/site-packages/httpcore/_backends/auto.py:31: in connect_tcp\n    return await self._backend.connect_tcp(\n.venv/lib/python3.12/site-packages/httpcore/_backends/anyio.py:113: in connect_tcp\n    with map_exceptions(exc_map):\n/usr/lib/python3.12/contextlib.py:158: in __exit__\n    self.gen.throw(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nmap = {<class 'TimeoutError'>: <class 'httpcore.ConnectTimeout'>, <class 'OSError'>: <class 'httpcore.ConnectError'>, <class 'anyio.BrokenResourceError'>: <class 'httpcore.ConnectError'>}\n\n    @contextlib.contextmanager\n    def map_exceptions(map: ExceptionMapping) -> typing.Iterator[None]:\n        try:\n            yield\n        except Exception as exc:  # noqa: PIE786\n            for from_exc, to_exc in map.items():\n                if isinstance(exc, from_exc):\n>                   raise to_exc(exc) from exc\nE                   httpcore.ConnectError: All connection attempts failed\n\n.venv/lib/python3.12/site-packages/httpcore/_exceptions.py:14: ConnectError\n\nThe above exception was the direct cause of the following exception:\n\nsession_id = 'test-gates-d7d64f60'\nbase_headers = {'X-Session-ID': 'test-gates-d7d64f60'}\nvalid_plan = '## 1. Solution Overview\\nA valid solution overview.\\n\\n## 2. Parts List\\n| Part | Qty |\\n|------|-----|\\n| Box  | 1  ...ategy\\n1. Step one.\\n\\n## 4. Cost & Weight Budget\\n- Cost: $10\\n- Weight: 100g\\n\\n## 5. Risk Assessment\\n- Risk: Low\\n'\nvalid_todo = '- [x] Step 1\\n- [-] Step 2'\nvalid_objectives = ObjectivesYaml(objectives=ObjectivesSection(goal_zone=BoundingBox(min=(10.0, 10.0, 10.0), max=(20.0, 20.0, 20.0)), for...zationMeta(static_variation_id=None, runtime_jitter_enabled=True), electronics_requirements=None, assembly_totals=None)\nminimal_script = '\\nfrom build123d import *\\nfrom shared.models.schemas import PartMetadata\\nfrom shared.workers.workbench_models impor...artMetadata(\\n        manufacturing_method=ManufacturingMethod.CNC, material_id=\"aluminum-6061\"\\n    )\\n    return p\\n'\n\n    @pytest.mark.integration_p0\n    @pytest.mark.asyncio\n    async def test_int_010_planner_pricing_script_integration(\n        session_id, base_headers, valid_plan, valid_todo, valid_objectives, minimal_script\n    ):\n        \"\"\"INT-010: Verify validate_costing_and_price block when over caps.\"\"\"\n        async with httpx.AsyncClient(timeout=300.0) as client:\n            # Keep invalid payload as raw data so schema validation happens in the endpoint path.\n            invalid_cost = {\n                \"version\": \"1.0\",\n                \"constraints\": {\n                    \"benchmark_max_unit_cost_usd\": 50.0,\n                    \"benchmark_max_weight_g\": 1000.0,\n                    \"planner_target_max_unit_cost_usd\": 45.0,\n                    \"planner_target_max_weight_g\": 900.0,\n                },\n                \"totals\": {\n                    \"estimated_unit_cost_usd\": 55.0,  # OVER PLANNER CAP\n                    \"estimated_weight_g\": 500.0,\n                    \"estimate_confidence\": \"high\",\n                },\n            }\n            files = {\n                \"plan.md\": valid_plan,\n                \"todo.md\": valid_todo,\n                \"objectives.yaml\": valid_objectives,\n                \"assembly_definition.yaml\": invalid_cost,\n                \"solution.py\": minimal_script,\n            }\n>           await setup_workspace(client, base_headers, files)\n\ntests/integration/architecture_p0/test_planner_gates.py:608: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ntests/integration/architecture_p0/test_planner_gates.py:141: in setup_workspace\n    resp = await client.post(\n.venv/lib/python3.12/site-packages/httpx/_client.py:1859: in post\n    return await self.request(\n.venv/lib/python3.12/site-packages/httpx/_client.py:1540: in request\n    return await self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.12/site-packages/httpx/_client.py:1629: in send\n    response = await self._send_handling_auth(\n.venv/lib/python3.12/site-packages/httpx/_client.py:1657: in _send_handling_auth\n    response = await self._send_handling_redirects(\n.venv/lib/python3.12/site-packages/httpx/_client.py:1694: in _send_handling_redirects\n    response = await self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.12/site-packages/httpx/_client.py:1730: in _send_single_request\n    response = await transport.handle_async_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.12/site-packages/httpx/_transports/default.py:393: in handle_async_request\n    with map_httpcore_exceptions():\n/usr/lib/python3.12/contextlib.py:158: in __exit__\n    self.gen.throw(value)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\n    @contextlib.contextmanager\n    def map_httpcore_exceptions() -> typing.Iterator[None]:\n        global HTTPCORE_EXC_MAP\n        if len(HTTPCORE_EXC_MAP) == 0:\n            HTTPCORE_EXC_MAP = _load_httpcore_exceptions()\n        try:\n            yield\n        except Exception as exc:\n            mapped_exc = None\n    \n            for from_exc, to_exc in HTTPCORE_EXC_MAP.items():\n                if not isinstance(exc, from_exc):\n                    continue\n                # We want to map to the most specific exception we can find.\n                # Eg if `exc` is an `httpcore.ReadTimeout`, we want to map to\n                # `httpx.ReadTimeout`, not just `httpx.TimeoutException`.\n                if mapped_exc is None or issubclass(to_exc, mapped_exc):\n                    mapped_exc = to_exc\n    \n            if mapped_exc is None:  # pragma: no cover\n                raise\n    \n            message = str(exc)\n>           raise mapped_exc(message) from exc\nE           httpx.ConnectError: All connection attempts failed\n\n.venv/lib/python3.12/site-packages/httpx/_transports/default.py:118: ConnectError"
        }
      ]
    }
  ]
}