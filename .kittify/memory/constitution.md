# Problemologist-AI Constitution

> Auto-generated by spec-kitty constitution command
> Created: 2026-02-06
> Version: 1.0.0

## Purpose

This constitution captures the technical standards and core principles for Problemologist-AI. All features and pull requests should align with these rules to ensure a maintainable, scalable, and cost-effective system.

## Core Rules

1. **Microservice-first Architecture**
   When in doubt about networking or application plumbing, adhere to standard microservice best practices. Isolate concerns and define clear interfaces.

2. **No Reinvention**
   Use established best practices. Do not write "innovative" plumbing code that demands 2x the time to maintain. If a standard tool exists, use it.

3. **Early Stopping & Fail Fast**
   No complex fallbacks. "Fallbacks" lead to bad code and technical debt. If the "happy path" isn't met, fail fast and allow the agent or system to simplify/retry at a high level. When refactoring, remove dead paths instead of patching them.

## Technical Standards

### Languages and Frameworks

- **Backend**: Python 3.10+ (FastAPI)
  - Agent Framework: `deepagents` (based on LangChain/LangGraph)
- **Frontend**: React (Vite, TypeScript preferred)
- **Database**:
  - System: Postgres (via SQLAlchemy/Alembic)
  - Worker/Local: SQLite
  - Assets: S3-compatible storage
- **Orchestration**: Temporal
- **Infrastructure**: Docker/Podman

### Type Safety & Schemas

- **Strict Typing**: All data models must use strict typing (Pydantic `Strict*` types) to ensure schema validity. In addition, we use Beartype for runtime type checking of critical functions.
- **Enums over Strings**: Always prefer `Enum` (or `StrEnum`) over raw strings for categorical data to ensure closed sets of values.
- **Fuzz Testing**: Schemas must be robust enough to withstand fuzz testing via `schemathesis`.

### Testing Requirements

- **Backend Logic**: Unit tests with `pytest`.
- **Microservices**: Integration tests using `docker-compose`.
- **Frontend**: Basic coverage for critical user flows (Vitest/Jest).
- **API**: `schemathesis` verification for OpenAPI compliance.
- **Coverage**: Focus on happy paths and expected failure modes.

### Performance and Scale

- **Concurrency**: Target ~5 concurrent agents per machine.
- **Architecture**: Async-first and Batch-first execution models.
- **Optimization Priority**: Optimize LLM prompts and knowledge retrieval first (primary cost/latency driver). System latency is secondary to reasoning quality.

### Deployment and Constraints

- **Platform**: Railway (Primary/Controller), SaladCloud/On-prem (Workers).
- **Runtime**: Podman (preferred for workers) or Docker containers.
- **Security**: Strict container isolation for all untrusted code execution.

## Governance

### Amendment Process

Any team member can propose amendments via pull request. Changes are discussed and merged following standard PR review process.

### Compliance Validation

Code reviewers validate compliance during PR review. Constitution violations should be flagged and addressed before merge.

### Exception Handling

Exceptions discussed case-by-case with team. Strong justification required. Consider updating constitution if exceptions become common.
